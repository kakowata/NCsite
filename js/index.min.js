var g={elem:{row:1,col:1,row_col:"1_1"},auto:{},row:{},touch:{swing:50},move:{top:!1,bottom:!1,right:!1,left:!1},ALL_COUNT:0,READ_COUNT:0,SCROLL_WIDTH:20,SCROLL_SPEED:500,SLIDE_SPEED:250,SEARCH_TEXT_WIDTH:"250px",FIVE_SECOND:5e3,FIFTEEN_SECOND:15e3,INTERVAL_ID:null,INTERVAL_TIME:0,INTERVAL_DELAY:0,PADDING_LEFT:300,ORIGIN_URL:"http://wakasa.nc-service.biz/nc/load?f=/files/nagagutsu.json",DELAY_SECTION_ELEMENT:{},LOADING_QUEUE:["1_1"],LOADING_ELEM:[],ALREADY_LOADED:[],PERMISSION_AGENT:[],existNextQueue:function(e){g.READ_COUNT++;g.LOADING_QUEUE.shift();_.isEmpty(g.LOADING_QUEUE)&&window.setTimeout(function(){$(".material-progress").hide(),window.setTimeout(function(){g.toggleBtn()},0)},g.INTERVAL_DELAY/2),$(e).fadeIn();var t=$(e).attr("class");$("li."+t).removeClass("opa-07"),g.READ_COUNT>=g.ALL_COUNT&&$("#initSearchIcon").fadeIn()},toggleBtn:function(){1===g.elem.row||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.top=!1,$(".section-nav.top").hide()):(g.move.top=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.top").show()),1===g.elem.col||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.left=!1,$(".section-nav.left").hide()):(g.move.left=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.left").show()),!$("#"+g.elem.row_col).hasRight()||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.right=!1,$(".section-nav.right").hide()):(g.move.right=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.right").show()),!$("#"+g.elem.row_col).hasBottom()||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.bottom=!1,$(".section-nav.bottom").hide()):(g.move.bottom=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.bottom").show());var e=g.elem.row+"_"+(g.elem.col-1);!$("#"+e+" iframe").length||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.left=!1,$(".section-nav.left").hide()):(g.move.left=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.left").show());var e=g.elem.row+"_"+(g.elem.col+1);!$("#"+e+" iframe").length||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.right=!1,$(".section-nav.right").hide()):(g.move.right=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.right").show());var e=g.elem.row-1+"_"+g.elem.col;!$("#"+e+" iframe").length||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.top=!1,$(".section-nav.top").hide()):(g.move.top=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.top").show());var e=g.elem.row+1+"_"+g.elem.col;!$("#"+e+" iframe").length||$("div.fullscreen-overlay:visible").length||$("div.slide-out-overlay:visible").length?(g.move.bottom=!1,$(".section-nav.bottom").hide()):(g.move.bottom=!0,_.contains(g.PERMISSION_AGENT,g.ua)||$(".section-nav.bottom").show()),console.debug(g.move),console.debug("")},init:function(){g.IFRAME_MARGIN=4,g.WINDOW_WIDTH=$(window).width(),g.WINDOW_HEIGHT=$(window).height(),g.HEADER_HEIGHT=$("header").css("height").replace("px",""),g.PADDING_TOP=$("div.sections-wrapper").css("padding-top").replace("px",""),g.HEIGHT_MARGIN=g.PADDING_TOP-g.HEADER_HEIGHT,g.IFRAME_HEIGHT=g.WINDOW_HEIGHT-g.PADDING_TOP-g.HEIGHT_MARGIN,g.MARGIN_RIGHT=g.HEIGHT_MARGIN/2,g.IFRAME_WIDTH=g.WINDOW_WIDTH-2*g.PADDING_LEFT,g.MOVE_TOP=g.IFRAME_HEIGHT+g.HEIGHT_MARGIN/2+g.IFRAME_MARGIN,g.MOVE_LEFT=g.IFRAME_WIDTH+g.HEIGHT_MARGIN/2,$(".sectionWindow").css({height:g.WINDOW_HEIGHT+"px",width:g.WINDOW_WIDTH+"px"})},getUA:function(){var e=navigator.userAgent;return e.indexOf("iPhone")>0||e.indexOf("iPod")>0||e.indexOf("Android")>0&&e.indexOf("Mobile")>0?g.ua="mobile":e.indexOf("iPad")>0||e.indexOf("Android")>0?g.ua="tablet":g.ua="pc",g.ua}};$(document).ready(function(){"use strict";$.fn.hasRight=function(){return!$(this).hasClass("right-end")},$.fn.hasBottom=function(){return!$(this).hasClass("bottom-end")};var e=function(){("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&t()},t=function(){for(var e=navigator.userAgent.toLowerCase(),t=["x11","macintosh","windows"],o=0;o<t.length;++o)e=e.replace(t[o],"android");navigator.__defineGetter__("userAgent",function(){return e})},o=function(e,t){$(".sectionWindow").scrollTo({left:e,top:t},g.SCROLL_SPEED,"normal")},i=function(){var e={},t=0;_.each(g.data,function(o){var i=o.category;"undefined"==typeof e[i]&&(e[i]=[]),e[i].push(o),t=_.size(e[i])>t?_.size(e[i]):t});var i=1;_.each(_.keys(e),function(e){var t=$("#industry-data").text(),o=_.template(t);$("ul.nav.navbar-nav").append(o({no:i++,name:e,lower_style:e.toLowerCase().replace(/\s+/g,"_")}));var n=e.toLowerCase().replace(/\s+/g,"_"),l=$("#section-wrapper").text(),a=_.template(l);$("div.sections-wrapper").append(a({id:n,margin:g.HEIGHT_MARGIN/2}))}),g.INDUSTRY=_.keys(e),$("ul.nav.navbar-nav li a:eq(0)").addClass("active");for(var n=[],l=0;t>l;l++){var a=1;_.each(g.INDUSTRY,function(t){if("undefined"!=typeof g.INDUSTRY[l]){g.ALL_COUNT++;var o=l+1+"_"+a,i=g.INDUSTRY[l].toLowerCase().replace(/\s+/g,"_"),r=t.toLowerCase().replace(/\s+/g,"_");if("undefined"!=typeof e[t][l]){var s=e[t][l],d=g.INDUSTRY[a]||"",u="undefined"!=typeof e[d]&&"undefined"!=typeof e[d][l]?1:0,E=$("#section-data").text(),v=_.template(E),m=v(new c(s.filepath,s.name,s.comment,s.filepath,l,a,o,e[t],u,r));"1_1"===o?$("#"+i+" div.clear").append(m):(g.DELAY_SECTION_ELEMENT[o]={},g.DELAY_SECTION_ELEMENT[o].content=m,g.DELAY_SECTION_ELEMENT[o].industry=i),n.push(s.Name),g.auto[s.Name]={},g.auto[s.Name].row=l+1,g.auto[s.Name].col=a,g.auto[s.Name].row_col=o,g.auto[s.Name].category=r,delete e[t][l],"undefined"==typeof g.row[l+1]&&(g.row[l+1]=a)}a++}})}$(".material-text-input").autocomplete({source:n,minLength:1,select:function(e,t){if("undefined"!=typeof t.item.value&&"undefined"!=typeof g.auto[t.item.value]){var i=g.auto[t.item.value];if(g.elem.row=i.row,g.elem.col=i.col,g.elem.row_col=i.row_col,"undefined"!=typeof g.DELAY_SECTION_ELEMENT[g.elem.row_col]){var n=g.DELAY_SECTION_ELEMENT[g.elem.row_col];$("#"+n.industry+" div.clear").append(n.content),g.DELAY_SECTION_ELEMENT[g.elem.row_col]=void 0}var l=(g.elem.col-1)*g.MOVE_LEFT,a=(g.elem.row-1)*g.MOVE_TOP;o(l,a),$("a.active").removeClass("active"),$("li."+i.category).find("a").addClass("active"),window.setTimeout(function(){g.toggleBtn()},0)}}}),r(g.elem.row,g.elem.col)},n=function(e){return g.INTERVAL_ID&&window.clearInterval(g.INTERVAL_ID),$("div.slide-out-overlay:visible").length||$("div.fullscreen-overlay:visible").length||(g.INTERVAL_ID=window.setInterval(l,e)),!1},l=function(){if($("#"+(g.elem.row+1)+"_"+g.elem.col+" img").length){g.elem.row=g.elem.row+1,g.elem.row_col=g.elem.row+"_"+g.elem.col;var e=(g.elem.col-1)*g.MOVE_LEFT,t=(g.elem.row-1)*g.MOVE_TOP;o(e,t)}else if($("#1_"+(g.elem.col+1)+" img").length){g.elem.row=1,g.elem.col=g.elem.col+1,g.elem.row_col=g.elem.row+"_"+g.elem.col;var e=(g.elem.col-1)*g.MOVE_LEFT,t=(g.elem.row-1)*g.MOVE_TOP,i=$("a.active");i.parent().next().find("a").addClass("active"),i.removeClass("active"),o(e,t)}else $("div.container-fluid ul.nav li a:eq(0)").click();return window.setTimeout(function(){g.toggleBtn()},0),window.setTimeout(function(){r(g.elem.row,g.elem.col)},0),g.INTERVAL_ID&&window.clearInterval(g.INTERVAL_ID),$("div.slide-out-overlay:visible").length||$("div.fullscreen-overlay:visible").length||(g.INTERVAL_ID=window.setInterval(l,g.FIVE_SECOND)),!1},a=function(){return _.isEmpty(g.LOADING_QUEUE)},r=function(e,t){g.INTERVAL_TIME=0;var o=e+"_"+(t+1);"undefined"!=typeof g.DELAY_SECTION_ELEMENT[o]&&s(o,"right");var i=e+1+"_"+t;"undefined"!=typeof g.DELAY_SECTION_ELEMENT[i]&&s(i,"bottom");var n=e+"_"+(t-1);"undefined"!=typeof g.DELAY_SECTION_ELEMENT[n]&&s(n,"left");var l=e-1+"_"+t;"undefined"!=typeof g.DELAY_SECTION_ELEMENT[l]&&s(l,"top"),_.isEmpty(g.LOADING_QUEUE)&&g.existNextQueue()},s=function(e,t){g.LOADING_QUEUE.push(e),$("div.section-nav").hide(),$(".material-progress").show(),g.INTERVAL_TIME+=g.INTERVAL_DELAY;var o=g.DELAY_SECTION_ELEMENT[e];window.setTimeout(function(){$("#"+o.industry+" div.clear").append(o.content)},g.INTERVAL_TIME),g.DELAY_SECTION_ELEMENT[e]=void 0},c=function(e,t,o,i,n,l,a,r,s,c){return this.url=e,this.name=t,this.section=a,this.comment=o,this.filepath=i,this.bottom="undefined"!=typeof r[n+1]?"not-bottom-end":"bottom-end",this.right=s?"not-right-end":"right-end",this.padding_left=1!==l?0:g.PADDING_LEFT,this.width=g.IFRAME_WIDTH,this.height=g.IFRAME_HEIGHT,this.margin=g.HEIGHT_MARGIN/2,this.industry=c,console.log(this),this};$(document).on("click touchstart",".iframeOpen",function(e){e.preventDefault();var t=$("#"+g.elem.row_col);$(".iframeTitle").text(t.find("span.name").text()),$(".slide-out-close").removeClass("half").addClass("open"),$(".slide-out.open").addClass("iframeArea"),$(".contentBox,.section-nav.top,.section-nav.bottom,.section-nav.left,.section-nav.right,.btn.iframeOpen.btn-default,.slide-out-widget").hide(),$(".slide-out-widgetFrame").show();var o=document.createElement("img");return o.src=t.find("span.url").text(),o.height=g.WINDOW_HEIGHT-g.HEADER_HEIGHT,o.width=g.WINDOW_WIDTH-g.PADDING_LEFT,$("div.slide-out-widgetFrame").append(o),g.INTERVAL_ID&&window.clearInterval(g.INTERVAL_ID),!1}),$(document).on("click touchstart","a.slide-out-close,div.slide-out-overlay",function(e){return e.preventDefault(),$(".slide-out-close").hasClass("open")?($(".slide-out.open").removeClass("iframeArea"),$(".slide-out-widget,.contentBox").show(),$(".slide-out-widgetFrame").hide(),$(".slide-out-close").removeClass("open"),window.setTimeout(function(){$(".slide-out-close").addClass("half")},0)):($(".slide-out-overlay").hide(),$(".slide-out").removeClass("open").removeClass("half"),g.INTERVAL_ID&&window.clearInterval(g.INTERVAL_ID),$("div.slide-out-overlay:visible").length||$("div.fullscreen-overlay:visible").length||(g.INTERVAL_ID=window.setInterval(l,g.FIVE_SECOND))),$(".btn.iframeOpen.btn-default").show(),$("div.slide-out-widgetFrame").empty(),g.toggleBtn(),!1}),$(document).on("click touchstart",".glyphicon",function(e){return e.preventDefault(),$(".group").animate({width:g.SEARCH_TEXT_WIDTH},g.SLIDE_SPEED).show(),!1}),$(document).on("click touchstart","div.container-fluid ul.nav li a",function(e){if(e.preventDefault(),!a())return!1;if($(this).parent().hasClass("opa-07"))return!1;var t=$(this).data("row");if(g.elem.row=1,g.elem.col=t,g.elem.row_col=g.elem.row+"_"+g.elem.col,"undefined"!=typeof g.DELAY_SECTION_ELEMENT[g.elem.row_col]){var i=g.DELAY_SECTION_ELEMENT[g.elem.row_col];$("#"+i.industry+" div.clear").append(i.content),g.DELAY_SECTION_ELEMENT[g.elem.row_col]=void 0}return $("a.active").removeClass("active"),$(this).addClass("active"),window.setTimeout(function(){var e=(g.elem.col-1)*g.MOVE_LEFT;o(e,0),window.setTimeout(function(){r(g.elem.row,g.elem.col)},0)},0),!1}),$(document).on("click touchstart","div.section-nav",function(e){if(e.preventDefault(),!a())return!1;var t="-=0",i="-=0";if($(this).hasClass("top")||$(this).hasClass("bottom"))g.elem.row=$(this).hasClass("top")?g.elem.row-1:g.elem.row+1,i=$(this).hasClass("top")?"-="+g.MOVE_TOP:"+="+g.MOVE_TOP;else if($(this).hasClass("left")||$(this).hasClass("right")){g.elem.col=$(this).hasClass("left")?g.elem.col-1:g.elem.col+1,t=$(this).hasClass("left")?"-="+g.MOVE_LEFT:"+="+g.MOVE_LEFT;var n=$("a.active").data("row"),l="ul.nav li a[data-row='"+($(this).hasClass("left")?n-1:n+1)+"']";$("ul.nav li a.active").removeClass("active"),$(l).addClass("active")}g.elem.row_col=g.elem.row+"_"+g.elem.col;var s=g.elem.row+1+"_1";if("undefined"!=typeof g.DELAY_SECTION_ELEMENT[s]){var c=g.DELAY_SECTION_ELEMENT[s];$("#"+c.industry+" div.clear").append(c.content),g.DELAY_SECTION_ELEMENT[s]=void 0}else if(!_.contains(g.ALREADY_LOADED,s)){$("#"+g.elem.row_col).parent().parent().next()}return o(t,i),window.setTimeout(function(){r(g.elem.row,g.elem.col)},0),!1}),$(document).on("click touchstart",".material-text-clear",function(e){return e.preventDefault(),$(".material-text-input").val(""),!1}),$(document).on("click touchstart",".header-action-button",function(e){if(e.preventDefault(),!a())return!1;g.INTERVAL_ID&&window.clearInterval(g.INTERVAL_ID);var t=$("#"+g.elem.row_col),i=t.attr("id"),n=t.find(".attribute .url").text(),l=t.find(".attribute .name").text(),s=t.find(".attribute .comment").text();if(i!==g.row_col){var c=t.find("img").attr("class"),d=i.split("_"),u=(Number(d[1])-1)*g.MOVE_LEFT,E=(Number(d[0])-1)*g.MOVE_TOP;$("a.active").removeClass("active"),$("li."+c).find("a").addClass("active"),o(u,E),window.setTimeout(function(){r(Number(d[0]),Number(d[1]))},0)}return $(".fullscreen-overlay").css({width:g.WINDOW_WIDTH+"px",height:g.WINDOW_HEIGHT+"px"}).addClass("loading").fadeIn(),window.setTimeout(function(){if($(".fullscreen-overlay header").fadeIn(),$(".fullscreen-overlay").removeClass("loading"),g.MARGIN_TOP=Number($(".fullscreen-header").css("height").replace("px","")),_.isEmpty(g.LOADING_ELEM[g.elem.row_col])){var e=document.createElement("iframe");e.src=n,e.height=g.WINDOW_HEIGHT-g.MARGIN_TOP,e.width=g.WINDOW_WIDTH+g.SCROLL_WIDTH,e.style["margin-top"]=g.MARGIN_TOP+"px",e.style["margin-left"]="-2px"}else var e=g.LOADING_ELEM[g.elem.row_col];$(".fullscreen-title .small-title").text(l),$(".fullscreen-title .small-comment").text(s),$(".fullscreen-overlay").append(e),window.setTimeout(function(){$(".fullscreen-close").show()},0)},g.INTERVAL_DELAY/2),!1}),$(document).on("click touchstart",".fullscreen-close",function(e){return e.preventDefault(),$(".fullscreen-overlay,.fullscreen-overlay header").fadeOut(),$(".fullscreen-overlay img").remove(),$(".fullscreen-overlay").css({width:"0px",height:"0px"}),window.setTimeout(function(){g.toggleBtn()},0),!1}),g.INTERVAL_ID=window.setInterval(l,g.FIFTEEN_SECOND),$(document).on("mousemove touchstart","body",function(e){e.preventDefault(),n(g.FIFTEEN_SECOND)}),$(document).on("contextmenu","body",function(e){});var d=!1;$(window).resize(function(){d!==!1&&clearTimeout(d),d=setTimeout(function(){location.href=location.href},g.SLIDE_SPEED)}),$("html").swipe({swipeLeft:function(e,t,o,i,n){return a()&&g.move.right?(e.preventDefault(),$("div.section-nav.right").click(),!1):void 0},swipeRight:function(e,t,o,i,n){return a()&&g.move.left?(e.preventDefault(),$("div.section-nav.left").click(),!1):void 0},swipeUp:function(e,t,o,i,n){return a()&&g.move.bottom?(e.preventDefault(),$("div.section-nav.bottom").click(),!1):void 0},swipeDown:function(e,t,o,i,n){return a()&&g.move.top?(e.preventDefault(),$("div.section-nav.top").click(),!1):void 0},threshold:0}),$.getJSON(g.ORIGIN_URL,{},function(e){g.data=e,i()}),e(),$("body").show(),_.contains(g.PERMISSION_AGENT,g.getUA())&&$("div.section-nav").hide(),g.init()});